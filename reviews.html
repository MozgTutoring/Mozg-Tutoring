<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Reviews • Mozg Tutoring</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/svg+xml" href="assets/img/logo-brain-math.svg">
    <link rel="stylesheet" href="assets/css/modern.css">
    <link rel="stylesheet" href="assets/css/logo.css">
    <link rel="stylesheet" href="assets/css/reviews.css">
  </head>
  <body>
    <header class="header">
      <div class="container nav">
        <a class="brand" href="./" aria-label="Mozg Tutoring home">
          <img class="logo" src="assets/img/logo-brain-math.svg" alt="">
          <span class="brand-title">Mozg Tutoring</span>
        </a>
        <nav>
          <a href="./about.html">About</a>
          <a href="./contact.html">Contact</a>
          <a href="./reviews.html">Reviews</a>
        </nav>
      </div>
    </header>

    <main class="container section">
      <section class="section">
        <h1 class="title">Reviews</h1>
        <p class="subtitle">Public reviews are shown below. iSETU submissions are private (write-only text); their star ratings are counted and images are displayed if provided.</p>

        <div id="review-stats" class="review-stats card" aria-live="polite">
          <div class="stat-main">
            <div class="stat-score">
              <span id="avg-rating" class="big-score">–</span>
              <span class="out-of">/ 5</span>
            </div>
            <div id="avg-stars" class="stars stars-lg" aria-label="Average rating"></div>
          </div>
          <div class="stat-meta">
            <div><strong id="review-count">0</strong> public reviews</div>
            <div><strong id="isetu-count">0</strong> iSETU submissions</div>
          </div>
          <div id="rating-dist" class="dist" title="Click a bar to filter iSETU images by rating"></div>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">iSETU reviews (screenshots)</h2>
        <p class="section-desc">Click a star category to drill down, or use sorting. The bars above are clickable as well.</p>
        <div id="isetu-toolbar" class="toolbar">
          <div id="isetu-filters" class="chips" role="tablist" aria-label="Filter by rating">
            <!-- chips inserted by JS -->
          </div>
          <div class="sorter">
            <label for="isetu-sort">Sort</label>
            <select id="isetu-sort" class="input">
              <option value="newest" selected>Newest</option>
              <option value="oldest">Oldest</option>
              <option value="rating-desc">Rating: high → low</option>
              <option value="rating-asc">Rating: low → high</option>
            </select>
          </div>
        </div>
        <div id="isetu-gallery" class="gallery"></div>
      </section>

      <section class="section">
        <div class="cards">
          <div class="card">
            <h2>Submit a review</h2>
            <form id="review-form" class="form" aria-describedby="review-status" novalidate>
              <div class="row">
                <div>
                  <label for="r-name">Name (optional)</label>
                  <input id="r-name" name="name" class="input" maxlength="100" placeholder="Ada Lovelace">
                </div>
                <div>
                  <label for="r-rating">Rating</label>
                  <div id="r-rating" class="star-input" role="radiogroup" aria-label="Rating out of five"></div>
                  <input type="hidden" id="r-rating-val" name="rating" value="">
                </div>
              </div>
              <div>
                <label for="r-text">Review</label>
                <textarea id="r-text" name="text" class="textarea" maxlength="4000" placeholder="Share your experience..."></textarea>
              </div>
              <div>
                <label class="checkbox">
                  <input type="checkbox" id="r-isetu" name="is_iSETU">
                  <span>This is an iSETU review (text stays private; star rating is counted)</span>
                </label>
              </div>
              <div class="form-footer">
                <button class="button" type="submit">Submit review</button>
                <span id="review-status" class="help">Thank you for your feedback.</span>
              </div>
            </form>
          </div>

          <div class="card">
            <h2>Upload iSETU review image (Admin)</h2>
            <form id="image-form" class="form" aria-describedby="image-status">
              <div class="row">
                <div>
                  <label for="img-file">Image</label>
                  <input id="img-file" name="file" class="input" type="file" accept="image/png,image/jpeg,image/webp" required>
                </div>
                <div>
                  <label for="img-caption">Caption (optional)</label>
                  <input id="img-caption" name="caption" class="input" maxlength="200" placeholder="2024 S2 iSETU">
                </div>
              </div>
              <div class="row">
                <div>
                  <label for="img-token">Admin token</label>
                  <input id="img-token" name="token" class="input" placeholder="Required to upload">
                </div>
              </div>
              <div class="form-footer">
                <button class="button" type="submit">Upload image</button>
                <span id="image-status" class="help">PNG/JPEG/WEBP up to ~5MB. Private text can be redacted in the image.</span>
              </div>
            </form>
          </div>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">Public reviews</h2>
        <div id="reviews-list" class="reviews"></div>
      </section>
    </main>

    <footer class="footer">
      <div class="container">© <span id="y"></span> Mozg Tutoring</div>
    </footer>
    <script>document.getElementById('y').textContent = new Date().getFullYear()</script>
    <script type="module" src="assets/js/reviews.js"></script>
  </body>
</html>